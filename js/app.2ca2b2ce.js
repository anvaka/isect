(function(t){function n(n){for(var e,a,s=n[0],u=n[1],f=n[2],h=0,l=[];h<s.length;h++)a=s[h],o[a]&&l.push(o[a][0]),o[a]=0;for(e in u)Object.prototype.hasOwnProperty.call(u,e)&&(t[e]=u[e]);c&&c(n);while(l.length)l.shift()();return i.push.apply(i,f||[]),r()}function r(){for(var t,n=0;n<i.length;n++){for(var r=i[n],e=!0,s=1;s<r.length;s++){var u=r[s];0!==o[u]&&(e=!1)}e&&(i.splice(n--,1),t=a(a.s=r[0]))}return t}var e={},o={app:0},i=[];function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,n,r){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)a.d(r,e,function(n){return t[n]}.bind(null,e));return r},a.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var f=0;f<s.length;f++)n(s[f]);var c=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,n,r){t.exports=r("56d7")},"034f":function(t,n,r){"use strict";var e=r("c21b"),o=r.n(e);o.a},"56d7":function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"random",function(){return D}),r.d(e,"parallelSlanted",function(){return j}),r.d(e,"sparse",function(){return R}),r.d(e,"triangle",function(){return B}),r.d(e,"cube",function(){return V}),r.d(e,"grid",function(){return W}),r.d(e,"drunkgrid",function(){return z}),r.d(e,"complete",function(){return G}),r.d(e,"splash",function(){return N}),r.d(e,"island",function(){return X});r("fca0"),r("c5f6"),r("5df2"),r("ac6a"),r("4f7f"),r("cadf"),r("551c"),r("097d");var o=r("2b0e"),i=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{attrs:{id:"app"}},[t._m(0),t.showLoading?t._e():r("div",[r("a",{staticClass:"action",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.generateNew()}}},[t._v("Generate New Demo")])]),t.showMetrics?r("div",{staticClass:"results"},[r("div",[r("strong",[t._v(t._s(t.linesCount))]),t._v(" lines. Found "),r("strong",[t._v(t._s(t.found))]),t._v(" intersections in "),r("strong",[t._v(t._s(t.elapsed))])])]):t._e(),t.showLoading?r("div",{staticClass:"loading-container"},[r("div",{staticClass:"loader"},[t._v("Finding intersections...")]),r("div",{staticClass:"label"},[t._v("Finding intersections...")])]):t._e(),t.error?r("div",{staticClass:"error"},[t._v("\n    Asserting failed in sweep line.\n  ")]):t._e(),r("a",{staticClass:"info",attrs:{href:"https://github.com/anvaka/isect"}},[t._v("Source code")])])},a=[function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("h3",[r("strong",[t._v("isect")]),t._v(" - intersection detection library")])}],s={error:null,showMetrics:!1,showLoading:!1,elapsed:0,found:0,linesCount:0},u=(r("7f7f"),r("d9da")),f=u(42),c=[{name:"random",algorithm:["brute","bush"],args:[{min:100,max:500},{min:100,max:200}]},{name:"complete",algorithm:["brute","bush"],args:[{min:10,max:40},function(t){return Math.round((10+f.gaussian())*t.p0)}]},{name:"cube",algorithm:["brute","bush"],args:[{min:100,max:150},function(){return Math.round(10+f.gaussian())}]},{name:"drunkgrid",algorithm:["brute","bush"],args:[{min:10,max:150},function(t){var n=Math.round(10*Math.random())+1;return 0===n?0:(t.p0>20&&n<1&&(n=3),n)}]},{name:"sparse",algorithm:["bush","bush","sweep"],args:[{min:50,max:300}]},{name:"triangle",algorithm:function(t){return t.p1>7?"brute":"bush"},args:[{min:10,max:30},{min:1,max:20}]},{name:"splash",algorithm:["sweep","bush"],args:[{min:10,max:50},{min:40,max:70}]},{name:"island",algorithm:["sweep","bush"],args:[{min:3,max:10},{min:6,max:11}]}];function h(){var t=Math.round(Math.random()*(c.length-1)),n=c[t],r={generator:n.name};n.args.forEach(function(t,n){var e="p".concat(n);r[e]="function"===typeof t?t(r):Math.round(Math.random()*(t.max-t.min)+t.min)});var e="sweep";if(Array.isArray(n.algorithm)){var o=Math.round(Math.random()*(n.algorithm.length-1));e=n.algorithm[o]}else"function"===typeof n.algorithm?e=n.algorithm(r):"string"===typeof n.algorithm&&(e=n.algorithm);return r.algorithm=e,r}var l=r("00c7"),m=l({}),d=m,g={name:"app",props:["state"],data:function(){return s},mounted:function(){d.fire("app-loaded")},methods:{generateNew:function(){this.showLoading=!0,this.showMetrics=!1;var t=h();d.fire("change-qs",t)}}},v=g,y=(r("034f"),r("2877")),p=Object(y["a"])(v,i,a,!1,null,null,null);p.options.__file="App.vue";var x=p.exports,b=(r("6b54"),r("a481"),r("c665")),w=r("aa9a"),M=function(){function t(){Object(b["a"])(this,t),this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}return Object(w["a"])(t,[{key:"growBy",value:function(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}},{key:"addPoint",value:function(t,n){if(void 0===t)throw new Error("Point is not defined");var r=t,e=n;void 0===e&&(r=t.x,e=t.y),r<this.minX&&(this.minX=r),r>this.maxX&&(this.maxX=r),e<this.minY&&(this.minY=e),e>this.maxY&&(this.maxY=e)}},{key:"addRect",value:function(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}},{key:"merge",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"left",get:function(){return this.minX}},{key:"top",get:function(){return this.minY}},{key:"right",get:function(){return this.maxX}},{key:"bottom",get:function(){return this.maxY}},{key:"width",get:function(){return this.maxX-this.minX}},{key:"height",get:function(){return this.maxY-this.minY}},{key:"cx",get:function(){return(this.minX+this.maxX)/2}},{key:"cy",get:function(){return(this.minY+this.maxY)/2}}]),t}(),k=S,_=r("b261"),P=r("9aeb");function S(t,n){var r=t.lines,e=t.isAsync,o=t.algorithm,i=P.scene(n);i.setClearColor(12/255,24/255,52/255,1);var a=new M;r.forEach(function(t){a.addPoint(t.from),a.addPoint(t.to)});var u=i.getPixelRatio(),f=a.left/u,c=a.top/u;i.setViewBox({left:f,top:c,right:f+a.width/u,bottom:c+a.height/u});var h,l,m=new P.WireCollection(r.length);m.color.r=238/255,m.color.g=238/255,m.color.b=238/255,m.color.a=.9,r.forEach(function(t){m.add({from:t.from,to:t.to})}),i.appendChild(m);var d,g={},v=0;s.showMetrics=!1,s.showLoading=!0;var y=setTimeout(p,80);return{dispose:S};function p(){s.error=null,e?w():x(),s.showLoading=!1,s.showMetrics=!0}function x(){var t=window.performance.now();h=_[o](r,{onError:b});try{var n=h.run()}catch(t){console.error(t),n=_.brute(r).run()}var e=window.performance.now()-t;console.log("finished in "+e+"ms"),n&&(console.log("found "+n.length+" intersections"),k(e),Y(n))}function b(t){throw s.error="Rounding error detected",C(h.sweepStatus),Y(h.results),new Error(t)}function w(){var t=performance.now();h=_[o](r,{onError:b});var n=performance.now();v+=n-t,k(v),d=requestAnimationFrame(I),window.next=function(){var t=h.step();return h.sweepStatus&&(C(h.sweepStatus),h.sweepStatus.printStatus()),Y(h.results),t}}function k(t){s.found=E(h.results.length),s.elapsed=Math.round(100*t)/100+"ms",s.linesCount=E(r.length)}function S(){d&&(cancelAnimationFrame(d),d=0),i.dispose(),clearTimeout(y),y=0}function I(){for(var n,r=performance.now(),e=0;e<t.stepsPerFrame;++e)n=h.step();var o=performance.now();v+=o-r,k(v),C(h.sweepStatus),Y(h.results),d=n?requestAnimationFrame(I):null}function C(t){if(t){var n=t.getLastPoint();g.point&&i.removeChild(g.point),g.point=new P.PointCollection(1);var r=g.point.add(n);r.setColor({r:1,g:0,b:0}),i.appendChild(g.point),g.line&&i.removeChild(g.line),g.line=new P.WireCollection(1),g.line.color={r:.1,g:1,b:1,a:.9},g.line.add({from:{x:-1e3,y:n.y},to:{x:1e3,y:n.y}}),i.appendChild(g.line),g.segments&&i.removeChild(g.segments);var e=t.status.keys();g.segments=new P.WireCollection(e.length),g.segments.color={r:.1,g:1,b:0,a:.9},e.forEach(function(t){g.segments.add({from:t.from,to:t.to})}),i.appendChild(g.segments)}}function Y(t){l&&(i.removeChild(l),l=null),t.length>0&&(l=new P.PointCollection(t.length),t.forEach(function(t,n){var r=l.add(t.point,n);r.setColor({r:163/244,g:597/255,b:597/255})}),i.appendChild(l))}}function E(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var I=r("d9da"),C=+new Date,Y=I(C);function N(t,n){for(var r=[],e=0;e<t;++e)for(var o=Y.gaussian()*n,i=Y.gaussian()*Math.PI*2,a=F({x:Y.gaussian(),y:Y.gaussian()},{x:o*Math.cos(i),y:o*Math.sin(i)},7),s=1;s<a.length;++s)r.push({from:a[s-1],to:a[s]});return r}function X(t,n){for(var r=100*Math.sqrt(n),e=2*Math.PI/t,o=Y.gaussian(),i=[],a={x:r*Math.cos(o),y:r*Math.sin(o)},s=a,u=0;u<t;++u){r=100*Y.nextDouble(),o+=e;for(var f=u<t-1?{x:r*Math.cos(o),y:r*Math.sin(o)}:a,c=F(s,f,n),h=1;h<c.length;++h)i.push({from:c[h-1],to:c[h]});s=f}return i}function F(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,e=[t,n],o=n.x-t.x,i=n.y-t.y,a=Math.sqrt(o*o+i*i),s=a,u=0;u<r;++u){for(var f=[],c=1;c<e.length;c+=1){var h=e[c-1],l=O(h,e[c],Math.sqrt(s));f.push(h,l)}f.push(e[e.length-1]),s/=2,e=f}return e}function O(t,n,r){return{x:.5*(t.x+n.x)+Y.gaussian()*r,y:.5*(t.y+n.y)+Y.gaussian()*r}}var T=r("d9da"),L=+new Date,A=T(L);function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2?arguments[2]:void 0;r=1536687392180,void 0!==r&&(A=T(r));for(var e=[],o=0;o<t;++o)e.push({from:{x:(A.nextDouble()-.5)*n,y:(A.nextDouble()-.5)*n},to:{x:(A.nextDouble()-.5)*n,y:(A.nextDouble()-.5)*n}});return e}function j(t){for(var n=[],r=0;r<t;++r){var e=-r,o=r;n.push({from:{x:e,y:o},to:{x:r,y:r+r}})}return n}function R(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=[],r=t,e=t,o=0;o<r;++o)for(var i=0;i<e;++i){var a=10*i,s=10*o,u=A.gaussian();n.push({from:{x:a,y:s},to:{x:a+10*Math.cos(u),y:s+10*Math.sin(u)}})}return n}function B(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=[],e=5,o=A.nextDouble()<.5?1:0,i=0;i<t;++i)for(var a=0;a<t;++a){var s=e*i,u=e*a,f=i%2===o?i:a,c=Math.PI*(f/t-A.gaussian());h(s,u,n,c)}return r;function h(t,n,e,o){var i={x:t+e/2,y:n-e/2},a=q({x:t,y:n},i,o),s=q({x:t+e,y:n},i,o),u=q({x:t+e/2,y:n-e},i,o);r.push({from:{x:a.x,y:a.y},to:{x:s.x,y:s.y},name:"B".concat(t,",").concat(n)},{from:{x:s.x,y:s.y},to:{x:u.x,y:u.y},name:"U".concat(t,",").concat(n)},{from:{x:u.x,y:u.y},to:{x:a.x,y:a.y},name:"D".concat(t,",").concat(n)})}}function q(t,n,r){t.x-=n.x,t.y-=n.y;var e=Math.cos(r)*t.x-t.y*Math.sin(r)+n.x,o=Math.sin(r)*t.x+t.y*Math.cos(r)+n.y;return{x:e,y:o}}function V(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=0,e=4,o=Math.PI/t,i=[],a=0;a<t;++a)r+=o+A.gaussian()*n,s(r,e),e+=A.gaussian()*n;return i;function s(t,n){var r=Math.cos(t)*n,e=Math.sin(t)*n;i.push({from:{x:r,y:e},to:{x:-e,y:r}},{from:{x:-e,y:r},to:{x:-r,y:-e}},{from:{x:-r,y:-e},to:{x:e,y:-r}},{from:{x:e,y:-r},to:{x:r,y:e}})}}function W(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=[],e=0,o=-.3,i=0;i<t;i+=1)r.push({name:"h"+i,from:{x:e,y:i+o},to:{x:e+(n-1),y:i+o}});for(i=0;i<n;i+=1)r.push({name:"v"+i,from:{x:e+i,y:o},to:{x:e+i,y:t-1+o}});return r}function z(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=[],e=-2*n,o=-2*n,i=0;i<t;i+=1)r.push({name:"h"+i,from:{x:e+A.gaussian()*n,y:i+o+A.gaussian()*n},to:{x:e+(t-1)+A.gaussian()*n,y:i+o+A.gaussian()*n}}),r.push({name:"v"+i,from:{x:e+i+A.gaussian()*n,y:o+A.gaussian()*n},to:{x:e+i+A.gaussian()*n,y:t-1+o+A.gaussian()*n}});return r}function G(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=2*Math.PI/t,e=[],o=new Set,i=0;i<t;++i)for(var a=r*i,s=Math.cos(a)*n/2,u=Math.sin(a)*n/2,f=0;f<t;++f)if(f!==i){var c=Math.cos(r*f)*n/2,h=Math.sin(r*f)*n/2,l="".concat(i,",").concat(f),m={name:l,from:{x:s,y:u},to:{x:c,y:h}},d=g(i,f);o.has(d)||(e.push(m),o.add(d))}return e;function g(t,n){return t<n?t+";"+n:n+";"+t}}var $=r("9cf4"),J=r.n($),Q=new Set(["brute","bush","sweep"]),U=J()({isAsync:!1,p0:150,p1:4,generator:"drunkgrid",algorithm:"brute"},{useSearch:!0});U.onChange(tt),d.on("app-loaded",Z),d.on("change-qs",function(t){U.set(t),tt(t)});var H,K=nt(U.get());function Z(){H=k(K,document.getElementById("scene"))}function tt(t){t.showLoading=!0,t.showMetrics=!1,K=nt(t),H&&H.dispose(),H=k(K,document.getElementById("scene"))}function nt(t){var n=t.generator;n in e||(n="drunkgrid");var r=rt(t.p0,50),o=rt(t.p1,4),i=e[n](r,o);window.lines=i;var a=t.isAsync,s=rt(t.stepsPerFrame,20);return{lines:i,isAsync:a,stepsPerFrame:s,algorithm:Q.has(t.algorithm)?t.algorithm:"bush"}}function rt(t,n){var r=Number.parseFloat(t);return Number.isFinite(r)?r:n}o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(x)}}).$mount("#app")},b261:function(t,n,r){"use strict";r.r(n);r("7514"),r("ac6a"),r("cadf"),r("551c"),r("097d");var e=r("ddc8");function o(t){var n=new e["a"](t);return{isEmpty:i,size:o,pop:s,find:r,insert:a};function r(t){return n.find(t)}function o(){return n.size}function i(){return n.isEmpty()}function a(t){n.add(t.point,t)}function s(){var t=n.pop();return t&&t.data}}r("7f7f"),r("c5f6");var i=1e-9;function a(t,n,r){var e=t.from.y-r,o=r-t.to.y,a=t.to.y-t.from.y;if(Math.abs(e)<i)return Math.abs(a)<i?n<=t.from.x?t.from.x:n>t.to.x?t.to.x:n:t.from.x;var s,u=t.to.x-t.from.x;return e>=o?(s=e*(u/a),t.from.x-s):(s=o*(u/a),t.to.x+s)}function s(t,n){var r=t/(Math.abs(t)+Math.abs(n));return n<0?r-1:1-r}function u(t,n){var r=t.from,e=n.from,o=r.x,i=r.y,a=e.x,s=e.y,u=t.dx,f=t.dy,c=n.dx,h=n.dy,l=u*h-c*f,m=(f*(o-a)-u*(i-s))/l;if(!(m<0||m>1)){var d=(c*(s-i)+h*(o-a))/l;return d>=0&&d<=1?{x:o-d*u,y:i-d*f}:void 0}}function f(t,n){return Math.abs(t.x-n.x)<i&&Math.abs(t.y-n.y)<i}function c(t,n){var r,o,i,s,u=!1,c=new e["a"](m),h={beforeLeft:null,left:null,right:null,afterRight:null},l={left:null,right:null};return{insertSegments:M,deleteSegments:k,getLeftRightPoint:g,getBoundarySegments:d,findSegmentsWithPoint:v,status:c,checkDuplicate:b,printStatus:w,getLastPoint:function(){return{x:i,y:r}}};function m(t,e){if(t===e)return 0;var o=a(t,i,r),s=a(e,i,r),f=o-s;if(Math.abs(f)>=n)return f;var c=Math.abs(t.dy)<n,h=Math.abs(e.dy)<n;if(c&&h)return e.to.x-t.to.x;if(c)return u?-1:1;if(h)return u?e.from.x>=i?-1:1:-1;var l=t.angle,m=e.angle;if(Math.abs(l-m)>=n)return u?l-m:m-l;var d=t.from.y-e.from.y;return Math.abs(d)>=n?-d:(d=t.to.y-e.to.y,Math.abs(d)>=n?-d:0)}function d(n,r){var e,o,i,a=n.length;for(e=o=a>0?n[0]:r[0],i=1;i<a;++i){var s=n[i],u=m(e,s);u>0&&(e=s),u=m(o,s),u<0&&(o=s)}var f=a>0?0:1;for(i=f;i<r.length;++i)s=r[i],u=m(e,s),u>0&&(e=s),u=m(o,s),u<0&&(o=s);var l=c.find(e);l||t("Left is missing. Precision error?");var d=c.find(o);d||t("Right is missing. Precision error?");var g=l&&c.prev(l),v=d&&c.next(d);while(v&&0===d.key.dy&&0===v.key.dy)v=c.next(v);return h.beforeLeft=g&&g.key,h.left=l&&l.key,h.right=d&&d.key,h.afterRight=v&&v.key,h}function g(t){var n,r=c._root,e=Number.POSITIVE_INFINITY;while(r){var o=a(r.key,t.x,t.y),i=t.x-o;if(i>=0){if(!(i<e))break;e=i,n=r,r=r.left,!1}else{if(!(-i<e))break;!0,e=-i,n=r,r=r.right}}l.left=n&&n.key;var s=n&&c.next(n);return l.right=s&&s.key,l}function v(t,r){var e=c._root;while(e){var o=a(e.key,t.x,t.y),i=t.x-o;if(Math.abs(i)<n){y(e,t,r);break}e=i<0?e.left:e.right}}function y(t,n,r){r(t.key),p(t.left,n,r),x(t.right,n,r)}function p(t,r,e){if(t){var o=a(t.key,r.x,r.y),i=r.x-o;Math.abs(i)<n?y(t,r,e):p(t.right,r,e)}}function x(t,r,e){if(t){var o=a(t.key,r.x,r.y),i=r.x-o;Math.abs(i)<n?y(t,r,e):x(t.left,r,e)}}function b(){var n;c.forEach(function(r){var e=r.key;n&&f(n.from,e.from)&&f(n.to,e.to)&&t("Duplicate key in the status! This may be caused by Floating Point rounding error"),n=e})}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(t,"status line: ",i,r),c.forEach(function(t){var n=a(t.key,i,r);console.log(n+" "+t.key.name)})}function M(t,n,e){var o;r=e.y,i=e.x;for(var a=0;a<t.length;++a)o=t[a],c.add(o);for(a=0;a<n.length;++a)o=n[a],c.add(o)}function k(n,e,a){var f,h=c._size;for(s=i,o=r,r=a.y,i=a.x,u=!0,f=0;f<n.length;++f)_(n[f],a);for(f=0;f<e.length;++f)_(e[f],a);u=!1,c._size!==h-e.length-n.length&&t("Segments were not removed from a tree properly. Precision error?")}function _(t,n){c.find(t)?c.remove(t):(i=s,r=o,c.find(t)&&c.remove(t),r=n.y,i=n.x)}}var h=r("c665"),l=function t(n,r){Object(h["a"])(this,t),this.point=n,r&&(this.from=[r])},m=[];function d(t,n){var r,e,a,h=[],d=n&&n.onFound||E,x=n&&n.onError||v,b=o(p),w=c(x,i);return t.forEach(I),{run:M,step:k,addSegment:I,eventQueue:b,sweepStatus:w,results:h};function M(){while(!b.isEmpty()){var t=b.pop();if(_(t))return}return h}function k(){if(!b.isEmpty()){var t=b.pop();return _(t),!0}return!1}function _(t){a=t.point;var n=t.from||m;r=e=void 0,w.findSegmentsWithPoint(a,P),r||(r=m),e||(e=m);var o,i,s=n.length,u=e.length,f=r.length,c=s+u+f>1,h=!c&&0===s&&0===f&&u>0;if((c||h)&&(t.isReported=!0,d(a,y(e,y(r,n)))))return!0;w.deleteSegments(r,e,a),w.insertSegments(e,n,a);var l=s+u===0;if(l){var g=w.getLeftRightPoint(a);if(o=g.left,!o)return;if(i=g.right,!i)return;S(o,i,t)}else{var v=w.getBoundarySegments(n,e);S(v.beforeLeft,v.left,t),S(v.right,v.afterRight,t)}return!1}function P(t){f(t.to,a)?r?r.push(t):r=[t]:f(t.from,a)||(e?e.push(t):e=[t])}function S(t,n,r){if(t&&n){var e=u(t,n);if(e){var o=r.point.y-e.y;if(!(o<-i)&&!(Math.abs(o)<i&&e.x<=r.point.x)){g(e);var a=b.find(e);if(a&&a.isReported)x("We already reported this event.");else if(!a){var s=new l(e);b.insert(s)}}}}}function E(t,n){h.push({point:t,segments:n})}function I(t){var n=t.from,r=t.to;g(n),g(r);var e=n.y-r.y;if(Math.abs(e)<1e-5&&(n.y=r.y,t.dy=0),n.y<r.y||n.y===r.y&&n.x>r.x){var o=n;n=t.from=r,r=t.to=o}t.dy=n.y-r.y,t.dx=n.x-r.x,t.angle=s(t.dy,t.dx);var i=t.dy===t.dx&&0===t.dy,a=b.find(n);if(a&&!i){var u=a.data.from;if(u)for(var c=0;c<u.length;++c){var h=u[c];if(f(h.to,r))return d(h.from,[h.from,h.to]),void d(h.to,[h.from,h.to])}}if(i){v=new l(r);b.insert(v)}else{if(a)a.data.from?a.data.from.push(t):a.data.from=[t];else{var m=new l(n,t);b.insert(m)}var v=new l(r);b.insert(v)}}}function g(t){Math.abs(t.x)<i&&(t.x=0),Math.abs(t.y)<i&&(t.y=0)}function v(t){throw new Error(t)}function y(t,n){return t?n?t.concat(n):t:n}function p(t,n){var r=n.y-t.y;return Math.abs(r)<i&&(r=t.x-n.x,Math.abs(r)<i&&(r=0)),r}function x(t,n){var r=t.from,e=n.from,o=r.x,i=r.y,a=e.x,s=e.y,u=t.from.x-t.to.x,f=t.from.y-t.to.y,c=n.from.x-n.to.x,h=n.from.y-n.to.y,l=u*h-c*f,m=(f*(o-a)-u*(i-s))/l;if(!(m<0||m>1)){var d=(c*(s-i)+h*(o-a))/l;return d>=0&&d<=1?{x:o-d*u,y:i-d*f}:void 0}}function b(t,n){var r,e=[],o=n&&n.onFound||s;return{run:a,results:e,step:i};function i(){r||(r={i:0});for(var n=t[r.i],e=r.i+1;e<t.length;++e){var i=t[e],a=x(n,i);if(a&&o(a,[n,i]))return}return r.i+=1,r.i<t.length}function a(){for(var n=0;n<t.length;++n)for(var r=t[n],i=n+1;i<t.length;++i){var a=t[i],s=x(r,a);if(s&&o(s,[r,a]))return}return e}function s(t,n){e.push({point:t,segments:n})}}r("386d");var w=r("9a36");function M(t,n){var r,e=[],o=n&&n.onFound||c,i=new w["a"](t.length);return t.forEach(f),i.finish(),{run:a,step:u,results:e,checkIntersection:s};function a(){for(var n=0;n<t.length;++n)if(s(t[n],n))return;return e}function s(n,r){var e,a=n.from.x,s=n.to.x,u=n.from.y,f=n.to.y;a>s&&(e=a,a=s,s=e),u>f&&(e=u,u=f,f=e);for(var c=i.search(a,u,s,f),h=0;h<c.length;++h){var l=c[h];if(!(l<=r)){var m=t[l],d=x(m,n);if(d&&o(d,[n,m]))return!0}}}function u(){r||(r={i:0});var n=t[r.i];return s(n,r.i),r.i+=1,r.i<t.length}function f(t){var n,r=t.from.x,e=t.to.x,o=t.from.y,a=t.to.y;r>e&&(n=r,r=e,e=n),o>a&&(n=o,o=a,a=n),i.add(r,o,e,a)}function c(t,n){e.push({point:t,segments:n})}}r.d(n,"sweep",function(){return d}),r.d(n,"brute",function(){return b}),r.d(n,"bush",function(){return M})},c21b:function(t,n,r){}});
//# sourceMappingURL=app.2ca2b2ce.js.map